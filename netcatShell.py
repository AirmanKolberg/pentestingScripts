# This script will open a shell on a machine
# on a local network allowing you to execute
# shell commands on it remotely

import os
import platform


def bash_command(user_in):
    _ = os.system(user_in)


bash_command('clear')
print('This app will open a shell allowing Machine A access to Machine B.')
machine_identified = False

while not machine_identified:
    machine_identifier = input("""Is this Machine A or Machine B?  (type a or b then Return, please)
""").lower()

    if machine_identifier == 'a' or 'b':
        machine_identified = True
    else:
        bash_command('clear')
        print(f"{machine_identifier} is neither 'a' nor 'b', please try again.")

bash_command('clear')
port = input('Please select a port to use: ')
bash_command('clear')

user_os = platform.system()
if user_os == 'Linux' or 'Darwin':
    if machine_identifier == 'b':
        bash_command('ifconfig | grep inet')
elif user_os == 'Windows':
    if machine_identifier == 'b':
        bash_command('ipconfig')
else:
    print("You've broke my code.  Congrats, let me know how you did it!")
    b_command = f'nc -lvp {port} -e /bin/bash'
    bash_command(b_command)

if machine_identifier == 'a':
    ip = input("Please type the IP to which you'd like to connect: ")
    bash_command('clear')
    a_command = f'nc -v {ip} {port}'
    bash_command(a_command)
